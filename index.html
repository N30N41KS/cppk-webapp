<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –ñ–î</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* --- –§–ò–ö–° –ë–ê–ì–ê –° –ú–ï–†–¶–ê–Æ–©–ò–ú –§–û–ù–û–ú --- */
        html {
            /* –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º, —á—Ç–æ —Ñ–æ–Ω html —Ç–æ–∂–µ –ø–æ–∫—Ä–∞—à–µ–Ω */
            background-color: var(--tg-theme-bg-color, #ffffff);
            height: 100%; /* –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ –≤—Å—é –≤—ã—Å–æ—Ç—É */
            overflow: hidden; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ª–∏—à–Ω–∏–π —Å–∫—Ä–æ–ª–ª –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã */
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            margin: 0;
            padding: 20px;
            box-sizing: border-box; /* –ß—Ç–æ–±—ã –ø–∞–¥–¥–∏–Ω–≥–∏ –Ω–µ –≤—ã–ª–µ–∑–∞–ª–∏ –∑–∞ 100% */
            height: 100%; /* –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º body */
            overflow-y: auto; /* –°–∫—Ä–æ–ª–ª —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ body, –µ—Å–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –≤–ª–µ–∑–∞–µ—Ç */
            -webkit-font-smoothing: antialiased; /* –ë–æ–ª–µ–µ —á–µ—Ç–∫–∏–µ —à—Ä–∏—Ñ—Ç—ã –Ω–∞ iOS */
        }
        /* ----------------------------------- */

        h2 { text-align: center; margin-bottom: 20px; margin-top: 0; }
        .form-group { position: relative; margin-bottom: 20px; }
        label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--tg-theme-hint-color, #999999); font-size: 14px; }
        
        input, textarea {
            width: 100%; box-sizing: border-box; padding: 14px;
            border: none; border-radius: 12px;
            background-color: var(--tg-theme-secondary-bg-color, #f4f4f5);
            color: var(--tg-theme-text-color, #000000); font-size: 16px;
            outline: none; /* –£–±–∏—Ä–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é –æ–±–≤–æ–¥–∫—É */
            transition: box-shadow 0.2s;
        }
        /* –î–æ–±–∞–≤–ª—è–µ–º —Å–≤–æ—é –æ–±–≤–æ–¥–∫—É –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ç–µ–º–µ */
        input:focus, textarea:focus {
            box-shadow: 0 0 0 2px var(--tg-theme-button-color, #3390ec);
        }
        
        textarea { resize: none; font-family: inherit; }

        button {
            width: 100%; padding: 16px; background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff); border: none; border-radius: 12px;
            font-size: 17px; font-weight: 600; cursor: pointer; margin-top: 10px;
            transition: opacity 0.2s;
        }
        button:active { opacity: 0.8; }

        /* –°—Ç–∏–ª–∏ –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞ */
        .custom-dropdown {
            position: absolute; top: calc(100% + 5px); left: 0; right: 0;
            background-color: var(--tg-theme-bg-color, #ffffff);
            border-radius: 12px;
            max-height: 250px; overflow-y: auto; z-index: 1000;
            display: none;
            /* –¢–µ–Ω—å –¥–ª—è –æ—Ç–¥–µ–ª–µ–Ω–∏—è –æ—Ç —Ñ–æ–Ω–∞, –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ç–µ–º—É */
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
             /* –î–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã —Ç–µ–Ω—å –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–≤–µ—Ç–ª–µ–µ –∏–ª–∏ —É–±—Ä–∞—Ç—å, 
                –Ω–æ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º CSS WebApp –Ω–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è —Ç–µ–Ω–∏.
                –û—Å—Ç–∞–≤–∏–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é. */
        }
        
        /* –°–∫—Ä–æ–ª–ª–±–∞—Ä –¥–ª—è —Å–ø–∏—Å–∫–∞ (—á—Ç–æ–±—ã –±—ã–ª–æ –∫—Ä–∞—Å–∏–≤–æ –Ω–∞ –ü–ö) */
        .custom-dropdown::-webkit-scrollbar { width: 6px; }
        .custom-dropdown::-webkit-scrollbar-thumb { background-color: var(--tg-theme-hint-color); border-radius: 3px; }

        .custom-dropdown.active { display: block; animation: fadeIn 0.2s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        
        .dropdown-item {
            padding: 12px 16px; display: flex; align-items: center; gap: 12px;
            cursor: pointer; border-bottom: 1px solid var(--tg-theme-secondary-bg-color, #eee);
            font-size: 16px;
        }
        .dropdown-item:last-child { border-bottom: none; }
        .dropdown-item:hover, .dropdown-item:active {
            background-color: var(--tg-theme-secondary-bg-color, #f4f4f5);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –û–§–ò–¶–ò–ê–õ–¨–ù–´–• –∫–∞—Ä—Ç–∏–Ω–æ–∫ */
        .dropdown-item img {
            width: 28px; height: 28px; object-fit: contain; flex-shrink: 0;
        }
        /* –ß—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –Ω–µ –ø—Ä–∏–ª–∏–ø–∞–ª, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å */
        .dropdown-item span {
             margin-left: 4px;
        }
    </style>
</head>
<body>

    <h2>üö® –°–æ–æ–±—â–∏—Ç—å –æ –ø–æ–ª–æ–º–∫–µ</h2>

    <div class="form-group">
        <label for="station-search">–°—Ç–∞–Ω—Ü–∏—è (–ú–µ—Ç—Ä–æ, –ú–¶–ö, –ú–¶–î):</label>
        <input type="text" id="station-search" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ..." autocomplete="off">
        <div style="position: absolute; right: 14px; top: 42px; color: var(--tg-theme-hint-color); pointer-events: none;">‚ñº</div>
        <div id="custom-stations-list" class="custom-dropdown"></div>
    </div>

    <div class="form-group">
        <label for="description">–ß—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å?</label>
        <textarea id="description" rows="5" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤—ã–π —Ç—É—Ä–Ω–∏–∫–µ—Ç –Ω–∞ –≤—ã—Ö–æ–¥..."></textarea>
    </div>

    <button id="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–ø–æ—Ä—Ç</button>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // === –§–ò–ö–° –ë–ê–ì–ê –° –§–û–ù–û–ú –ß–ï–†–ï–ó JS ===
        // –°–æ–æ–±—â–∞–µ–º –¢–µ–ª–µ–≥—Ä–∞–º—É, –∫–∞–∫–æ–π —Ü–≤–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è "—à–∞–ø–∫–∏" –∏ —Ñ–æ–Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è,
        // —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —á–µ—Ä–Ω—ã—Ö –ø–æ–ª–æ—Å –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ.
        tg.setHeaderColor(tg.themeParams.bg_color || '#ffffff');
        tg.setBackgroundColor(tg.themeParams.bg_color || '#ffffff');
        // ==================================


        const rawStations = [
            // –ú–¶–î 1
            "–û–¥–∏–Ω—Ü–æ–≤–æ (D1)", "–ë–∞–∫–æ–≤–∫–∞ (D1)", "–°–∫–æ–ª–∫–æ–≤–æ (D1)", "–ù–µ–º—á–∏–Ω–æ–≤–∫–∞ (D1)", "–°–µ—Ç—É–Ω—å (D1)", "–†–∞–±–æ—á–∏–π –ü–æ—Å—ë–ª–æ–∫ (D1)", "–ö—É–Ω—Ü–µ–≤–æ (D1)", "–°–ª–∞–≤—è–Ω—Å–∫–∏–π –±—É–ª—å–≤–∞—Ä (D1)", "–§–∏–ª–∏ (D1)", "–¢–µ—Å—Ç–æ–≤—Å–∫–∞—è (D1)", "–ë–µ–≥–æ–≤–∞—è (D1)", "–ë–µ–ª–æ—Ä—É—Å—Å–∫–∞—è (D1)", "–°–∞–≤—ë–ª–æ–≤—Å–∫–∞—è (D1)", "–î–º–∏—Ç—Ä–æ–≤—Å–∫–∞—è (D1)",
            // –ú–¶–î 2
            "–ü–æ–¥–æ–ª—å—Å–∫ (D2)", "–°–∏–ª–∏–∫–∞—Ç–Ω–∞—è (D2)", "–û—Å—Ç–∞—Ñ—å–µ–≤–æ (D2)", "–©–µ—Ä–±–∏–Ω–∫–∞ (D2)", "–ë—É—Ç–æ–≤–æ (D2)", "–ë–∏—Ç—Ü–∞ (D2)", "–ö—Ä–∞—Å–Ω—ã–π –°—Ç—Ä–æ–∏—Ç–µ–ª—å (D2)", "–ü–æ–∫—Ä–æ–≤—Å–∫–æ–µ (D2)", "–¶–∞—Ä–∏—Ü—ã–Ω–æ (D2)", "–ú–æ—Å–∫–≤–æ—Ä–µ—á—å–µ (D2)", "–ö—É—Ä—å—è–Ω–æ–≤–æ (D2)", "–ü–µ—Ä–µ—Ä–≤–∞ (D2)", "–î–µ–ø–æ (D2)", "–ü–µ—á–∞—Ç–Ω–∏–∫–∏ (D2)", "–¢–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏ (D2)",
            // –ú–¶–î 3
            "–ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥-–ö—Ä—é–∫–æ–≤–æ (D3)", "–°—Ö–æ–¥–Ω—è (D3)", "–ü–æ–¥—Ä–µ–∑–∫–æ–≤–æ (D3)", "–ù–æ–≤–æ–ø–æ–¥—Ä–µ–∑–∫–æ–≤–æ (D3)", "–•–∏–º–∫–∏ (D3)", "–•–æ–≤—Ä–∏–Ω–æ (D3)", "–ì—Ä–∞—á—ë–≤—Å–∫–∞—è (D3)", "–õ–∏—Ö–æ–±–æ—Ä—ã (D3)", "–ü–µ—Ç—Ä–æ–≤—Å–∫–æ-–†–∞–∑—É–º–æ–≤—Å–∫–∞—è (D3)", "–û—Å—Ç–∞–Ω–∫–∏–Ω–æ (D3)", "–≠–ª–µ–∫—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫–∞—è (D3)", "–í—ã—Ö–∏–Ω–æ (D3)", "–õ—é–±–µ—Ä—Ü—ã (D3)", "–†–∞–º–µ–Ω—Å–∫–æ–µ (D3)",
            // –ú–¶–î 4
            "–ê–ø—Ä–µ–ª–µ–≤–∫–∞ (D4)", "–í–Ω—É–∫–æ–≤–æ (D4)", "–ü–µ—Ä–µ–¥–µ–ª–∫–∏–Ω–æ (D4)", "–û—á–∞–∫–æ–≤–æ (D4)", "–ê–º–∏–Ω—å–µ–≤—Å–∫–∞—è (D4)", "–ú–∏–Ω—Å–∫–∞—è (D4)", "–ö—É—Ç—É–∑–æ–≤—Å–∫–∞—è (D4)", "–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è (D4)", "–ß—É—Ö–ª–∏–Ω–∫–∞ (D4)", "–ù–æ–≤–æ–≥–∏—Ä–µ–µ–≤–æ (D4)", "–†–µ—É—Ç–æ–≤ (D4)", "–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω–∞—è (D4)",
            // –ú–¶–ö
            "–û–∫—Ä—É–∂–Ω–∞—è (–ú–¶–ö)", "–í–ª–∞–¥—ã–∫–∏–Ω–æ (–ú–¶–ö)", "–ë–æ—Ç–∞–Ω–∏—á–µ—Å–∫–∏–π —Å–∞–¥ (–ú–¶–ö)", "–†–æ—Å—Ç–æ–∫–∏–Ω–æ (–ú–¶–ö)", "–õ–æ–∫–æ–º–æ—Ç–∏–≤ (–ú–¶–ö)", "–ò–∑–º–∞–π–ª–æ–≤–æ (–ú–¶–ö)", "–®–æ—Å—Å–µ –≠–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤ (–ú–¶–ö)", "–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è (–ú–¶–ö)", "–ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è (–ú–¶–ö)", "–ü–ª–æ—â–∞–¥—å –ì–∞–≥–∞—Ä–∏–Ω–∞ (–ú–¶–ö)", "–õ—É–∂–Ω–∏–∫–∏ (–ú–¶–ö)", "–ö—É—Ç—É–∑–æ–≤—Å–∫–∞—è (–ú–¶–ö)", "–î–µ–ª–æ–≤–æ–π —Ü–µ–Ω—Ç—Ä (–ú–¶–ö)", "–®–µ–ª–µ–ø–∏—Ö–∞ (–ú–¶–ö)", "–•–æ—Ä–æ—à—ë–≤–æ (–ú–¶–ö)", "–ë–∞–ª—Ç–∏–π—Å–∫–∞—è (–ú–¶–ö)",
            // –ú–µ—Ç—Ä–æ (–æ—Å–Ω–æ–≤–Ω—ã–µ)
            "–°–æ–∫–æ–ª—å–Ω–∏–∫–∏ (–ú–µ—Ç—Ä–æ)", "–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–û—Ö–æ—Ç–Ω—ã–π –†—è–¥ (–ú–µ—Ç—Ä–æ)", "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–º–µ–Ω–∏ –õ–µ–Ω–∏–Ω–∞ (–ú–µ—Ç—Ä–æ)", "–ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã (–ú–µ—Ç—Ä–æ)", "–•–æ–≤—Ä–∏–Ω–æ (–ú–µ—Ç—Ä–æ)", "–í–æ–π–∫–æ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–î–∏–Ω–∞–º–æ (–ú–µ—Ç—Ä–æ)", "–¢–≤–µ—Ä—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞—è (–ú–µ—Ç—Ä–æ)", "–ü–∞–≤–µ–ª–µ—Ü–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–©—ë–ª–∫–æ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–ë–∞—É–º–∞–Ω—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–ö—É—Ä—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–ü–ª–æ—â–∞–¥—å –†–µ–≤–æ–ª—é—Ü–∏–∏ (–ú–µ—Ç—Ä–æ)", "–ê—Ä–±–∞—Ç—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–ö–∏–µ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–ü—Ä–æ—Å–ø–µ–∫—Ç –ú–∏—Ä–∞ (–ú–µ—Ç—Ä–æ)", "–¢–∞–≥–∞–Ω—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–û–∫—Ç—è–±—Ä—å—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–í–î–ù–• (–ú–µ—Ç—Ä–æ)", "–ö–∏—Ç–∞–π-–≥–æ—Ä–æ–¥ (–ú–µ—Ç—Ä–æ)", "–¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–ö—É–∑—å–º–∏–Ω–∫–∏ (–ú–µ—Ç—Ä–æ)", "–ü—Ä–æ–ª–µ—Ç–∞—Ä—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–ü—É—à–∫–∏–Ω—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–¢–∏–º–∏—Ä—è–∑–µ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–ú–µ–Ω–¥–µ–ª–µ–µ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–¶–≤–µ—Ç–Ω–æ–π –±—É–ª—å–≤–∞—Ä (–ú–µ—Ç—Ä–æ)", "–õ—é–±–ª–∏–Ω–æ (–ú–µ—Ç—Ä–æ)", "–ß–∫–∞–ª–æ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ)", "–¢—Ä—É–±–Ω–∞—è (–ú–µ—Ç—Ä–æ)"
        ];

        // --- –ì–ï–ù–ï–†–ê–¢–û–† –û–§–ò–¶–ò–ê–õ–¨–ù–´–• –ò–ö–û–ù–û–ö (–õ–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã) ---
        // –í–ê–ñ–ù–û: –°–æ–∑–¥–∞–π –ø–∞–ø–∫—É "img" —Ä—è–¥–æ–º —Å index.html –∏ –ø–æ–ª–æ–∂–∏ —Ç—É–¥–∞ —Ñ–∞–π–ª—ã:
        // d1.png, d2.png, d3.png, d4.png, mck.png, metro.png
        function getIconPathForStation(stationName) {
            if (stationName.includes("(D1)")) return "img/d1.png";
            if (stationName.includes("(D2)")) return "img/d2.png";
            if (stationName.includes("(D3)")) return "img/d3.png";
            if (stationName.includes("(D4)")) return "img/d4.png";
            if (stationName.includes("(–ú–¶–ö)")) return "img/mck.png";
            
            // –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ú–µ—Ç—Ä–æ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö
            return "img/metro.png";
        }
        // -----------------------------------------------------

        const stations = rawStations.map(name => {
            return {
                name: name,
                // –¢–µ–ø–µ—Ä—å –º—ã —Ö—Ä–∞–Ω–∏–º –ü–£–¢–¨ –∫ –∫–∞—Ä—Ç–∏–Ω–∫–µ
                iconPath: getIconPathForStation(name)
            };
        });

        const searchInput = document.getElementById('station-search');
        const dropdown = document.getElementById('custom-stations-list');
        let selectedStation = "";

        function renderList(filterText = "") {
            dropdown.innerHTML = "";
            const filtered = stations.filter(s => s.name.toLowerCase().includes(filterText.toLowerCase()));
            
            if (filtered.length === 0) {
                dropdown.classList.remove('active');
                return;
            }

            filtered.sort((a, b) => a.name.localeCompare(b.name)).forEach(station => {
                let div = document.createElement('div');
                div.className = 'dropdown-item';
                // –í—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–≥ <img> —Å –ø—É—Ç–µ–º –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Ñ–∞–π–ª—É
                div.innerHTML = `<img src="${station.iconPath}" alt="logo" onerror="this.style.display='none'"> <span>${station.name}</span>`;
                
                div.addEventListener('click', () => {
                    searchInput.value = station.name;
                    selectedStation = station.name;
                    dropdown.classList.remove('active');
                });
                
                dropdown.appendChild(div);
            });
            dropdown.classList.add('active');
        }

        searchInput.addEventListener('input', (e) => renderList(e.target.value));
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –≤–≤–µ–¥–µ–Ω–æ –∏–ª–∏ –ø—É—Å—Ç–æ
        searchInput.addEventListener('focus', () => {
             renderList(searchInput.value);
        });

        // –ó–∞–∫—Ä—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
        document.addEventListener('click', (e) => {
            if (e.target !== searchInput && !dropdown.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });

        document.getElementById('submit-btn').addEventListener('click', () => {
            // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ –¢–µ–ª–µ–≥—Ä–∞–º
            tg.HapticFeedback.impactOccurred('light');
            
            let descInput = document.getElementById('description').value.trim();
            let finalStation = selectedStation || searchInput.value.trim() || "–ù–µ —É–∫–∞–∑–∞–Ω–∞";

            if (!descInput) {
                tg.showAlert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É!");
                return;
            }

            // –û—á–∏—â–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç —Ç–µ–≥–æ–≤ (D1), (–ú–¶–ö), (–ú–µ—Ç—Ä–æ) –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
            finalStation = finalStation.replace(/\s*\(.*?\)/, '').trim();

            let dataToSend = {
                station: finalStation,
                description: descInput
            };

            tg.sendData(JSON.stringify(dataToSend));
            // –ù–µ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–≥–Ω–æ–≤–µ–Ω–Ω–æ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–µ–ª –≤–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –∫–Ω–æ–ø–∫–∏
            setTimeout(() => {
                 tg.close();
            }, 100);
        });
    </script>
</body>
</html>
