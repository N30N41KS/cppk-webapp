<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –ñ–î</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            padding: 20px;
            margin: 0;
        }
        h2 { text-align: center; margin-bottom: 20px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; color: var(--tg-theme-hint-color, #999999); }
        input, textarea {
            width: 100%; box-sizing: border-box; padding: 12px;
            border: 1px solid var(--tg-theme-hint-color, #cccccc); border-radius: 8px;
            background-color: var(--tg-theme-secondary-bg-color, #f4f4f5);
            color: var(--tg-theme-text-color, #000000); font-size: 16px;
        }
        input:focus, textarea:focus { outline: none; border-color: var(--tg-theme-button-color, #3390ec); }
        button {
            width: 100%; padding: 15px; background-color: var(--tg-theme-button-color, #3390ec);
            color: var(--tg-theme-button-text-color, #ffffff); border: none; border-radius: 8px;
            font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px;
        }
    </style>
</head>
<body>

    <h2>üö® –°–æ–æ–±—â–∏—Ç—å –æ –ø–æ–ª–æ–º–∫–µ</h2>

    <div class="form-group">
        <label for="station">–°—Ç–∞–Ω—Ü–∏—è (–ú–µ—Ç—Ä–æ, –ú–¶–ö, –ú–¶–î):</label>
        <input type="text" id="station" list="stations-list" placeholder="–ù–∞—á–Ω–∏—Ç–µ –≤–≤–æ–¥–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ..." autocomplete="off">
        <datalist id="stations-list"></datalist>
    </div>

    <div class="form-group">
        <label for="description">–ß—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å?</label>
        <textarea id="description" rows="5" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤—ã–π —Ç—É—Ä–Ω–∏–∫–µ—Ç –Ω–∞ –≤—ã—Ö–æ–¥..."></textarea>
    </div>

    <button id="submit-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–ø–æ—Ä—Ç</button>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        // –ù–µ—É–±–∏–≤–∞–µ–º–∞—è –±–∞–∑–∞ —Å—Ç–∞–Ω—Ü–∏–π —Å —Ü–≤–µ—Ç–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
        const moscowStations = [
            // –ú–¶–î 1
            "üü† –û–¥–∏–Ω—Ü–æ–≤–æ (D1)", "üü† –ë–∞–∫–æ–≤–∫–∞ (D1)", "üü† –°–∫–æ–ª–∫–æ–≤–æ (D1)", "üü† –ù–µ–º—á–∏–Ω–æ–≤–∫–∞ (D1)", "üü† –°–µ—Ç—É–Ω—å (D1)", "üü† –†–∞–±–æ—á–∏–π –ü–æ—Å—ë–ª–æ–∫ (D1)", "üü† –ö—É–Ω—Ü–µ–≤–æ (D1)", "üü† –°–ª–∞–≤—è–Ω—Å–∫–∏–π –±—É–ª—å–≤–∞—Ä (D1)", "üü† –§–∏–ª–∏ (D1)", "üü† –¢–µ—Å—Ç–æ–≤—Å–∫–∞—è (D1)", "üü† –ë–µ–≥–æ–≤–∞—è (D1)", "üü† –ë–µ–ª–æ—Ä—É—Å—Å–∫–∞—è (D1)", "üü† –°–∞–≤—ë–ª–æ–≤—Å–∫–∞—è (D1)", "üü† –î–º–∏—Ç—Ä–æ–≤—Å–∫–∞—è (D1)",
            // –ú–¶–î 2
            "ü©∑ –ü–æ–¥–æ–ª—å—Å–∫ (D2)", "ü©∑ –°–∏–ª–∏–∫–∞—Ç–Ω–∞—è (D2)", "ü©∑ –û—Å—Ç–∞—Ñ—å–µ–≤–æ (D2)", "ü©∑ –©–µ—Ä–±–∏–Ω–∫–∞ (D2)", "ü©∑ –ë—É—Ç–æ–≤–æ (D2)", "ü©∑ –ë–∏—Ç—Ü–∞ (D2)", "ü©∑ –ö—Ä–∞—Å–Ω—ã–π –°—Ç—Ä–æ–∏—Ç–µ–ª—å (D2)", "ü©∑ –ü–æ–∫—Ä–æ–≤—Å–∫–æ–µ (D2)", "ü©∑ –¶–∞—Ä–∏—Ü—ã–Ω–æ (D2)", "ü©∑ –ú–æ—Å–∫–≤–æ—Ä–µ—á—å–µ (D2)", "ü©∑ –ö—É—Ä—å—è–Ω–æ–≤–æ (D2)", "ü©∑ –ü–µ—Ä–µ—Ä–≤–∞ (D2)", "ü©∑ –î–µ–ø–æ (D2)", "ü©∑ –ü–µ—á–∞—Ç–Ω–∏–∫–∏ (D2)", "ü©∑ –¢–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏ (D2)",
            // –ú–¶–î 3
            "üî¥ –ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥-–ö—Ä—é–∫–æ–≤–æ (D3)", "üî¥ –°—Ö–æ–¥–Ω—è (D3)", "üî¥ –ü–æ–¥—Ä–µ–∑–∫–æ–≤–æ (D3)", "üî¥ –ù–æ–≤–æ–ø–æ–¥—Ä–µ–∑–∫–æ–≤–æ (D3)", "üî¥ –•–∏–º–∫–∏ (D3)", "üî¥ –•–æ–≤—Ä–∏–Ω–æ (D3)", "üî¥ –ì—Ä–∞—á—ë–≤—Å–∫–∞—è (D3)", "üî¥ –õ–∏—Ö–æ–±–æ—Ä—ã (D3)", "üî¥ –ü–µ—Ç—Ä–æ–≤—Å–∫–æ-–†–∞–∑—É–º–æ–≤—Å–∫–∞—è (D3)", "üî¥ –û—Å—Ç–∞–Ω–∫–∏–Ω–æ (D3)", "üî¥ –≠–ª–µ–∫—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫–∞—è (D3)", "üî¥ –í—ã—Ö–∏–Ω–æ (D3)", "üî¥ –õ—é–±–µ—Ä—Ü—ã (D3)", "üî¥ –†–∞–º–µ–Ω—Å–∫–æ–µ (D3)",
            // –ú–¶–î 4
            "üü¢ –ê–ø—Ä–µ–ª–µ–≤–∫–∞ (D4)", "üü¢ –í–Ω—É–∫–æ–≤–æ (D4)", "üü¢ –ü–µ—Ä–µ–¥–µ–ª–∫–∏–Ω–æ (D4)", "üü¢ –û—á–∞–∫–æ–≤–æ (D4)", "üü¢ –ê–º–∏–Ω—å–µ–≤—Å–∫–∞—è (D4)", "üü¢ –ú–∏–Ω—Å–∫–∞—è (D4)", "üü¢ –ö—É—Ç—É–∑–æ–≤—Å–∫–∞—è (D4)", "üü¢ –ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è (D4)", "üü¢ –ß—É—Ö–ª–∏–Ω–∫–∞ (D4)", "üü¢ –ù–æ–≤–æ–≥–∏—Ä–µ–µ–≤–æ (D4)", "üü¢ –†–µ—É—Ç–æ–≤ (D4)", "üü¢ –ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω–∞—è (D4)",
            // –ú–¶–ö
            "‚≠ï –û–∫—Ä—É–∂–Ω–∞—è (–ú–¶–ö)", "‚≠ï –í–ª–∞–¥—ã–∫–∏–Ω–æ (–ú–¶–ö)", "‚≠ï –ë–æ—Ç–∞–Ω–∏—á–µ—Å–∫–∏–π —Å–∞–¥ (–ú–¶–ö)", "‚≠ï –†–æ—Å—Ç–æ–∫–∏–Ω–æ (–ú–¶–ö)", "‚≠ï –õ–æ–∫–æ–º–æ—Ç–∏–≤ (–ú–¶–ö)", "‚≠ï –ò–∑–º–∞–π–ª–æ–≤–æ (–ú–¶–ö)", "‚≠ï –®–æ—Å—Å–µ –≠–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤ (–ú–¶–ö)", "‚≠ï –ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è (–ú–¶–ö)", "‚≠ï –ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è (–ú–¶–ö)", "‚≠ï –ü–ª–æ—â–∞–¥—å –ì–∞–≥–∞—Ä–∏–Ω–∞ (–ú–¶–ö)", "‚≠ï –õ—É–∂–Ω–∏–∫–∏ (–ú–¶–ö)", "‚≠ï –ö—É—Ç—É–∑–æ–≤—Å–∫–∞—è (–ú–¶–ö)", "‚≠ï –î–µ–ª–æ–≤–æ–π —Ü–µ–Ω—Ç—Ä (–ú–¶–ö)", "‚≠ï –®–µ–ª–µ–ø–∏—Ö–∞ (–ú–¶–ö)", "‚≠ï –•–æ—Ä–æ—à—ë–≤–æ (–ú–¶–ö)", "‚≠ï –ë–∞–ª—Ç–∏–π—Å–∫–∞—è (–ú–¶–ö)",
            // –ú–µ—Ç—Ä–æ (–æ—Å–Ω–æ–≤–Ω—ã–µ + —Ç–≤–æ—è –ê–≤–∏–∞–º–æ—Ç–æ—Ä–Ω–∞—è)
            "üü° –ê–≤–∏–∞–º–æ—Ç–æ—Ä–Ω–∞—è (–ú–µ—Ç—Ä–æ 8)", "üü¢ –ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 2)", "üü† –ê–ª–µ–∫—Å–µ–µ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 6)", "üîò –ê–ª—Ç—É—Ñ—å–µ–≤–æ (–ú–µ—Ç—Ä–æ 9)", "üî¥ –°–æ–∫–æ–ª—å–Ω–∏–∫–∏ (–ú–µ—Ç—Ä–æ 1)", "üî¥ –ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 1)", "üî¥ –û—Ö–æ—Ç–Ω—ã–π –†—è–¥ (–ú–µ—Ç—Ä–æ 1)", "üî¥ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–º–µ–Ω–∏ –õ–µ–Ω–∏–Ω–∞ (–ú–µ—Ç—Ä–æ 1)", "üî¥ –ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã (–ú–µ—Ç—Ä–æ 1)", "üü¢ –í–æ–π–∫–æ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 2)", "üü¢ –î–∏–Ω–∞–º–æ (–ú–µ—Ç—Ä–æ 2)", "üü¢ –¢–≤–µ—Ä—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 2)", "üü¢ –¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞—è (–ú–µ—Ç—Ä–æ 2)", "üü¢ –ü–∞–≤–µ–ª–µ—Ü–∫–∞—è (–ú–µ—Ç—Ä–æ 2)", "üîµ –©—ë–ª–∫–æ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 3)", "üîµ –ë–∞—É–º–∞–Ω—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 3)", "üîµ –ö—É—Ä—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 3)", "üîµ –ü–ª–æ—â–∞–¥—å –†–µ–≤–æ–ª—é—Ü–∏–∏ (–ú–µ—Ç—Ä–æ 3)", "üîµ –ê—Ä–±–∞—Ç—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 3)", "üîµ –ö–∏–µ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 3)", "üü§ –ü—Ä–æ—Å–ø–µ–∫—Ç –ú–∏—Ä–∞ (–ú–µ—Ç—Ä–æ 5)", "üü§ –¢–∞–≥–∞–Ω—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 5)", "üü§ –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è (–ú–µ—Ç—Ä–æ 5)", "üü§ –û–∫—Ç—è–±—Ä—å—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 5)", "üü† –í–î–ù–• (–ú–µ—Ç—Ä–æ 6)", "üü† –ö–∏—Ç–∞–π-–≥–æ—Ä–æ–¥ (–ú–µ—Ç—Ä–æ 6)", "üü† –¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 6)", "üü£ –í—ã—Ö–∏–Ω–æ (–ú–µ—Ç—Ä–æ 7)", "üü£ –ö—É–∑—å–º–∏–Ω–∫–∏ (–ú–µ—Ç—Ä–æ 7)", "üü£ –¢–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏ (–ú–µ—Ç—Ä–æ 7)", "üü£ –ü—Ä–æ–ª–µ—Ç–∞—Ä—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 7)", "üü£ –ü—É—à–∫–∏–Ω—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 7)", "üîò –¢–∏–º–∏—Ä—è–∑–µ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 9)", "üîò –°–∞–≤—ë–ª–æ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 9)", "üîò –ú–µ–Ω–¥–µ–ª–µ–µ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 9)", "üîò –¶–≤–µ—Ç–Ω–æ–π –±—É–ª—å–≤–∞—Ä (–ú–µ—Ç—Ä–æ 9)", "üçè –õ—é–±–ª–∏–Ω–æ (–ú–µ—Ç—Ä–æ 10)", "üçè –ß–∫–∞–ª–æ–≤—Å–∫–∞—è (–ú–µ—Ç—Ä–æ 10)", "üçè –¢—Ä—É–±–Ω–∞—è (–ú–µ—Ç—Ä–æ 10)"
        ];

        function loadStations() {
            const dataList = document.getElementById('stations-list');
            dataList.innerHTML = ''; 
            moscowStations.sort().forEach(station => {
                let option = document.createElement('option');
                option.value = station;
                dataList.appendChild(option);
            });
        }

        document.addEventListener('DOMContentLoaded', loadStations);

        document.getElementById('submit-btn').addEventListener('click', () => {
            let stationInput = document.getElementById('station').value.trim();
            let descInput = document.getElementById('description').value.trim();

            if (!descInput) {
                tg.showAlert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É!");
                return;
            }

            // –û—á–∏—â–∞–µ–º —Å—Ç–∞–Ω—Ü–∏—é –æ—Ç —ç–º–æ–¥–∑–∏ –∏ —Ç–µ–≥–æ–≤ (–ú–¶–ö/D1) –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –ò–ò
            let cleanStation = stationInput.replace(/[\u{1F000}-\u{1F9FF}‚≠ï]/gu, '').replace(/\s*\(.*?\)/, '').trim();

            let dataToSend = {
                station: cleanStation || "–ù–µ —É–∫–∞–∑–∞–Ω–∞",
                description: descInput
            };

            tg.sendData(JSON.stringify(dataToSend));
            tg.close();
        });
    </script>
</body>
</html>
