<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π –†–∞–ø–æ—Ä—Ç</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --primary-color: #005AAB; 
            --bg-color: var(--tg-theme-bg-color, #ffffff);
            --text-color: var(--tg-theme-text-color, #000000);
            --input-bg: var(--tg-theme-secondary-bg-color, #f0f2f5);
            --hint-color: var(--tg-theme-hint-color, #8e8e93);
            --button-text: var(--tg-theme-button-text-color, #ffffff);
        }

        * { transition: border-color 0.3s ease, background-color 0.3s ease; }

        html, body { 
            background-color: var(--bg-color); 
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            margin: 0; padding: 0; box-sizing: border-box; height: 100%; overflow-x: hidden;
        }
        
        body { padding: 20px 15px; }

        h2 { text-align: center; margin-top: 0; margin-bottom: 20px; font-size: 22px; color: var(--text-color); font-weight: 700; }
        
        .form-group { position: relative; margin-bottom: 18px; }
        label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--hint-color); font-size: 14px; margin-left: 4px; }

        input, textarea { 
            width: 100%; box-sizing: border-box; padding: 14px; 
            border: 2px solid transparent; border-radius: 12px; 
            background-color: var(--input-bg); color: var(--text-color); font-size: 16px; outline: none; 
        }

        input::placeholder, textarea::placeholder { color: var(--hint-color); }
        input:focus, textarea:focus { border-color: var(--primary-color); }

        button { 
            position: relative; width: 100%; height: 54px; 
            background-color: var(--primary-color); color: var(--button-text); 
            border: none; border-radius: 12px; font-size: 17px; font-weight: 600; 
            cursor: pointer; margin-top: 10px; overflow: visible; 
        }

        button:active:not(.train-depart) { transform: scale(0.98); }

        .train-depart {
            /* –£–í–ï–õ–ò–ß–ï–ù–û –î–û 3.5 –°–ï–ö–£–ù–î + –ë–û–õ–ï–ï –ü–õ–ê–í–ù–ê–Ø –ö–†–ò–í–ê–Ø –£–°–ö–û–†–ï–ù–ò–Ø */
            animation: btnFade 0.1s forwards, trainDrive 3.5s 0.2s cubic-bezier(0.4, 0, 0.2, 1) forwards !important;
            background-color: transparent !important;
            box-shadow: none !important;
            pointer-events: none;
        }
        
        @keyframes btnFade { to { background-color: transparent; } }

        .train-depart .btn-text { display: none; }
        .train-depart .train-wrapper { display: flex; }

        .train-wrapper {
            display: none; position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%); height: 26px; gap: 4px; align-items: center;
        }

        .train-car {
            background-color: #4b5563; width: 40px; height: 100%;
            position: relative; border-radius: 3px; box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .train-car::after {
            content: ''; position: absolute; top: 6px; left: 4px; right: 4px; height: 8px;
            background-color: var(--primary-color); border-radius: 2px; opacity: 0.9;
        }

        .train-car::before {
            content: ''; position: absolute; top: 5px; bottom: 2px; left: 50%; width: 4px;
            transform: translateX(-50%); background-color: #1f2937; border-radius: 1px; z-index: 2;
        }

        .train-car.head { border-radius: 3px 14px 14px 3px; width: 50px; }
        .train-car.head .headlight {
            position: absolute; right: 2px; bottom: 4px; width: 6px; height: 6px;
            background-color: #FFD702; border-radius: 50%; box-shadow: 4px 0 10px #FFD702;
        }

        .train-car.tail { border-radius: 14px 3px 3px 14px; width: 50px; }
        .train-car.tail .taillight {
            position: absolute; left: 2px; bottom: 4px; width: 6px; height: 6px;
            background-color: #EF161E; border-radius: 50%;
        }

        @keyframes trainDrive {
            0% { transform: translate(-50%, -50%); }
            10% { transform: translate(-55%, -50%); } /* –ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–∫–∞—Ç –Ω–∞–∑–∞–¥ */
            100% { transform: translate(200vw, -50%); } /* –ü–ª–∞–≤–Ω—ã–π –≤—ã–µ–∑–¥ */
        }

        .custom-dropdown { 
            position: absolute; top: calc(100% + 5px); left: 0; right: 0; 
            background-color: var(--bg-color); border: 1px solid var(--input-bg);
            border-radius: 12px; max-height: 220px; overflow-y: auto; z-index: 1000; display: none; 
            box-shadow: 0 8px 20px rgba(0,0,0,0.15); 
        }
        .custom-dropdown.active { display: block; }
        .dropdown-item { padding: 12px 14px; display: flex; align-items: center; cursor: pointer; border-bottom: 1px solid var(--input-bg); }
        .dropdown-item:last-child { border-bottom: none; }
        .dropdown-item:hover { background-color: var(--input-bg); }
        .icon-box { width: 24px; height: 24px; margin-right: 12px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
        .icon-box img { width: 100%; height: 100%; object-fit: contain; }
        .station-name { font-size: 15px; font-weight: 500; color: var(--text-color); }
    </style>
</head>
<body>

    <h2>üö® –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –¶–ü–ü–ö</h2>

    <div class="form-group">
        <label>–ì–¥–µ –ø—Ä–æ–∏–∑–æ—à–µ–ª –∏–Ω—Ü–∏–¥–µ–Ω—Ç?</label>
        <input type="text" id="station-search" placeholder="üîç –ü–æ–∏—Å–∫ —Å—Ç–∞–Ω—Ü–∏–∏..." autocomplete="off">
        <div id="custom-stations-list" class="custom-dropdown"></div>
    </div>

    <div class="form-group">
        <label>–î–µ—Ç–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã</label>
        <textarea id="description" rows="4" placeholder="–ù–∞–ø—Ä: –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å —Ç—É—Ä–Ω–∏–∫–µ—Ç–∞..."></textarea>
    </div>

    <button id="submit-btn">
        <span class="btn-text">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É</span>
        <div class="train-wrapper">
            <div class="train-car tail"><div class="taillight"></div></div>
            <div class="train-car passenger"></div>
            <div class="train-car passenger"></div>
            <div class="train-car head"><div class="headlight"></div></div>
        </div>
    </button>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const lineColors = {
            "1": "#EF161E", "2": "#2DBE2C", "3": "#0078BF", "4": "#00BFFF", "5": "#8D5B2D",
            "6": "#ED9121", "7": "#800080", "8": "#FFD702", "8–ê": "#FFD702", "9": "#999999",
            "10": "#99CC00", "11": "#82C0C0", "12": "#A1B3D4", "13": "#9999FF", "14": "#F6323E",
            "15": "#DE64A1", "16": "#43A047",
            "D1": "#F6A600", "D2": "#E74280", "D3": "#E95B0C", "D4": "#40B286"
        };

        const data = {
            "1": ["–ë—É–ª—å–≤–∞—Ä –†–æ–∫–æ—Å—Å–æ–≤—Å–∫–æ–≥–æ", "–ß–µ—Ä–∫–∏–∑–æ–≤—Å–∫–∞—è", "–ü—Ä–µ–æ–±—Ä–∞–∂–µ–Ω—Å–∫–∞—è –ø–ª–æ—â–∞–¥—å", "–°–æ–∫–æ–ª—å–Ω–∏–∫–∏", "–ö—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∞—è", "–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è", "–ö—Ä–∞—Å–Ω—ã–µ –í–æ—Ä–æ—Ç–∞", "–ß–∏—Å—Ç—ã–µ –ø—Ä—É–¥—ã", "–õ—É–±—è–Ω–∫–∞", "–û—Ö–æ—Ç–Ω—ã–π –†—è–¥", "–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∏–º–µ–Ω–∏ –õ–µ–Ω–∏–Ω–∞", "–ö—Ä–æ–ø–æ—Ç–∫–∏–Ω—Å–∫–∞—è", "–ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã", "–§—Ä—É–Ω–∑–µ–Ω—Å–∫–∞—è", "–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è", "–í–æ—Ä–æ–±—å—ë–≤—ã –≥–æ—Ä—ã", "–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç", "–ü—Ä–æ—Å–ø–µ–∫—Ç –í–µ—Ä–Ω–∞–¥—Å–∫–æ–≥–æ", "–Æ–≥–æ-–ó–∞–ø–∞–¥–Ω–∞—è", "–¢—Ä–æ–ø–∞—Ä—ë–≤–æ", "–†—É–º—è–Ω—Ü–µ–≤–æ", "–°–∞–ª–∞—Ä—å–µ–≤–æ", "–§–∏–ª–∞—Ç–æ–≤ –õ—É–≥", "–ü—Ä–æ–∫—à–∏–Ω–æ", "–û–ª—å—Ö–æ–≤–∞—è", "–ù–æ–≤–æ–º–æ—Å–∫–æ–≤—Å–∫–∞—è", "–ü–æ—Ç–∞–ø–æ–≤–æ"],
            "2": ["–•–æ–≤—Ä–∏–Ω–æ", "–ë–µ–ª–æ–º–æ—Ä—Å–∫–∞—è", "–†–µ—á–Ω–æ–π –≤–æ–∫–∑–∞–ª", "–í–æ–¥–Ω—ã–π —Å—Ç–∞–¥–∏–æ–Ω", "–í–æ–π–∫–æ–≤—Å–∫–∞—è", "–°–æ–∫–æ–ª", "–ê—ç—Ä–æ–ø–æ—Ä—Ç", "–î–∏–Ω–∞–º–æ", "–ë–µ–ª–æ—Ä—É—Å—Å–∫–∞—è", "–ú–∞—è–∫–æ–≤—Å–∫–∞—è", "–¢–≤–µ—Ä—Å–∫–∞—è", "–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞—è", "–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∞—è", "–ü–∞–≤–µ–ª–µ—Ü–∫–∞—è", "–ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è", "–¢–µ—Ö–Ω–æ–ø–∞—Ä–∫", "–ö–æ–ª–æ–º–µ–Ω—Å–∫–∞—è", "–ö–∞—à–∏—Ä—Å–∫–∞—è", "–ö–∞–Ω—Ç–µ–º–∏—Ä–æ–≤—Å–∫–∞—è", "–¶–∞—Ä–∏—Ü—ã–Ω–æ", "–û—Ä–µ—Ö–æ–≤–æ", "–î–æ–º–æ–¥–µ–¥–æ–≤—Å–∫–∞—è", "–ö—Ä–∞—Å–Ω–æ–≥–≤–∞—Ä–¥–µ–π—Å–∫–∞—è", "–ê–ª–º–∞-–ê—Ç–∏–Ω—Å–∫–∞—è"],
            "3": ["–©—ë–ª–∫–æ–≤—Å–∫–∞—è", "–ü–µ—Ä–≤–æ–º–∞–π—Å–∫–∞—è", "–ò–∑–º–∞–π–ª–æ–≤—Å–∫–∞—è", "–ü–∞—Ä—Ç–∏–∑–∞–Ω—Å–∫–∞—è", "–°–µ–º—ë–Ω–æ–≤—Å–∫–∞—è", "–≠–ª–µ–∫—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫–∞—è", "–ë–∞—É–º–∞–Ω—Å–∫–∞—è", "–ö—É—Ä—Å–∫–∞—è", "–ü–ª–æ—â–∞–¥—å –†–µ–≤–æ–ª—é—Ü–∏–∏", "–ê—Ä–±–∞—Ç—Å–∫–∞—è", "–°–º–æ–ª–µ–Ω—Å–∫–∞—è", "–ö–∏–µ–≤—Å–∫–∞—è", "–ü–∞—Ä–∫ –ü–æ–±–µ–¥—ã", "–°–ª–∞–≤—è–Ω—Å–∫–∏–π –±—É–ª—å–≤–∞—Ä", "–ö—É–Ω—Ü–µ–≤—Å–∫–∞—è", "–ú–æ–ª–æ–¥—ë–∂–Ω–∞—è", "–ö—Ä—ã–ª–∞—Ç—Å–∫–æ–µ", "–°—Ç—Ä–æ–≥–∏–Ω–æ", "–ú—è–∫–∏–Ω–∏–Ω–æ", "–í–æ–ª–æ–∫–æ–ª–∞–º—Å–∫–∞—è", "–ú–∏—Ç–∏–Ω–æ", "–ü—è—Ç–Ω–∏—Ü–∫–æ–µ —à–æ—Å—Å–µ"],
            "4": ["–ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤—Å–∫–∏–π —Å–∞–¥", "–ê—Ä–±–∞—Ç—Å–∫–∞—è", "–°–º–æ–ª–µ–Ω—Å–∫–∞—è", "–ö–∏–µ–≤—Å–∫–∞—è", "–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∞—è", "–ö—É—Ç—É–∑–æ–≤—Å–∫–∞—è", "–§–∏–ª–∏", "–ë–∞–≥—Ä–∞—Ç–∏–æ–Ω–æ–≤—Å–∫–∞—è", "–§–∏–ª—ë–≤—Å–∫–∏–π –ø–∞—Ä–∫", "–ü–∏–æ–Ω–µ—Ä—Å–∫–∞—è", "–ö—É–Ω—Ü–µ–≤—Å–∫–∞—è", "–í—ã—Å—Ç–∞–≤–æ—á–Ω–∞—è", "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è"],
            "5": ["–ü–∞—Ä–∫ –∫—É–ª—å—Ç—É—Ä—ã", "–û–∫—Ç—è–±—Ä—å—Å–∫–∞—è", "–î–æ–±—Ä—ã–Ω–∏–Ω—Å–∫–∞—è", "–ü–∞–≤–µ–ª–µ—Ü–∫–∞—è", "–¢–∞–≥–∞–Ω—Å–∫–∞—è", "–ö—É—Ä—Å–∫–∞—è", "–ö–æ–º—Å–æ–º–æ–ª—å—Å–∫–∞—è", "–ü—Ä–æ—Å–ø–µ–∫—Ç –ú–∏—Ä–∞", "–ù–æ–≤–æ—Å–ª–æ–±–æ–¥—Å–∫–∞—è", "–ë–µ–ª–æ—Ä—É—Å—Å–∫–∞—è", "–ö—Ä–∞—Å–Ω–æ–ø—Ä–µ—Å–Ω–µ–Ω—Å–∫–∞—è", "–ö–∏–µ–≤—Å–∫–∞—è"],
            "6": ["–ú–µ–¥–≤–µ–¥–∫–æ–≤–æ", "–ë–∞–±—É—à–∫–∏–Ω—Å–∫–∞—è", "–°–≤–∏–±–ª–æ–≤–æ", "–ë–æ—Ç–∞–Ω–∏—á–µ—Å–∫–∏–π —Å–∞–¥", "–í–î–ù–•", "–ê–ª–µ–∫—Å–µ–µ–≤—Å–∫–∞—è", "–†–∏–∂—Å–∫–∞—è", "–ü—Ä–æ—Å–ø–µ–∫—Ç –ú–∏—Ä–∞", "–°—É—Ö–∞—Ä–µ–≤—Å–∫–∞—è", "–¢—É—Ä–≥–µ–Ω–µ–≤—Å–∫–∞—è", "–ö–∏—Ç–∞–π-–≥–æ—Ä–æ–¥", "–¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è", "–û–∫—Ç—è–±—Ä—å—Å–∫–∞—è", "–®–∞–±–æ–ª–æ–≤—Å–∫–∞—è", "–õ–µ–Ω–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç", "–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è", "–ü—Ä–æ—Ñ—Å–æ—é–∑–Ω–∞—è", "–ù–æ–≤—ã–µ –ß–µ—Ä—ë–º—É—à–∫–∏", "–ö–∞–ª—É–∂—Å–∫–∞—è", "–ë–µ–ª—è–µ–≤–æ", "–ö–æ–Ω—å–∫–æ–≤–æ", "–¢—ë–ø–ª—ã–π –°—Ç–∞–Ω", "–Ø—Å–µ–Ω–µ–≤–æ", "–ù–æ–≤–æ—è—Å–µ–Ω–µ–≤—Å–∫–∞—è"],
            "7": ["–ü–ª–∞–Ω–µ—Ä–Ω–∞—è", "–°—Ö–æ–¥–Ω–µ–Ω—Å–∫–∞—è", "–¢—É—à–∏–Ω—Å–∫–∞—è", "–°–ø–∞—Ä—Ç–∞–∫", "–©—É–∫–∏–Ω—Å–∫–∞—è", "–û–∫—Ç—è–±—Ä—å—Å–∫–æ–µ –ü–æ–ª–µ", "–ü–æ–ª–µ–∂–∞–µ–≤—Å–∫–∞—è", "–ë–µ–≥–æ–≤–∞—è", "–£–ª–∏—Ü–∞ 1905 –≥–æ–¥–∞", "–ë–∞—Ä—Ä–∏–∫–∞–¥–Ω–∞—è", "–ü—É—à–∫–∏–Ω—Å–∫–∞—è", "–ö—É–∑–Ω–µ—Ü–∫–∏–π –ú–æ—Å—Ç", "–ö–∏—Ç–∞–π-–≥–æ—Ä–æ–¥", "–¢–∞–≥–∞–Ω—Å–∫–∞—è", "–ü—Ä–æ–ª–µ—Ç–∞—Ä—Å–∫–∞—è", "–í–æ–ª–≥–æ–≥—Ä–∞–¥—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç", "–¢–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏", "–ö—É–∑—å–º–∏–Ω–∫–∏", "–†—è–∑–∞–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç", "–í—ã—Ö–∏–Ω–æ", "–õ–µ—Ä–º–æ–Ω—Ç–æ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç", "–ñ—É–ª–µ–±–∏–Ω–æ", "–ö–æ—Ç–µ–ª—å–Ω–∏–∫–∏"],
            "8": ["–ù–æ–≤–æ–∫–æ—Å–∏–Ω–æ", "–ù–æ–≤–æ–≥–∏—Ä–µ–µ–≤–æ", "–ü–µ—Ä–æ–≤–æ", "–®–æ—Å—Å–µ –≠–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤", "–ê–≤–∏–∞–º–æ—Ç–æ—Ä–Ω–∞—è", "–ü–ª–æ—â–∞–¥—å –ò–ª—å–∏—á–∞", "–ú–∞—Ä–∫—Å–∏—Å—Ç—Å–∫–∞—è", "–¢—Ä–µ—Ç—å—è–∫–æ–≤—Å–∫–∞—è"],
            "8–ê": ["–î–µ–ª–æ–≤–æ–π —Ü–µ–Ω—Ç—Ä", "–ü–∞—Ä–∫ –ü–æ–±–µ–¥—ã", "–ú–∏–Ω—Å–∫–∞—è", "–õ–æ–º–æ–Ω–æ—Å–æ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç", "–†–∞–º–µ–Ω–∫–∏", "–ú–∏—á—É—Ä–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç", "–û–∑—ë—Ä–Ω–∞—è", "–ì–æ–≤–æ—Ä–æ–≤–æ", "–°–æ–ª–Ω—Ü–µ–≤–æ", "–ë–æ—Ä–æ–≤—Å–∫–æ–µ —à–æ—Å—Å–µ", "–ù–æ–≤–æ–ø–µ—Ä–µ–¥–µ–ª–∫–∏–Ω–æ", "–†–∞—Å—Å–∫–∞–∑–æ–≤–∫–∞", "–ü—ã—Ö—Ç–∏–Ω–æ", "–ê—ç—Ä–æ–ø–æ—Ä—Ç –í–Ω—É–∫–æ–≤–æ"],
            "9": ["–ê–ª—Ç—É—Ñ—å–µ–≤–æ", "–ë–∏–±–∏—Ä–µ–≤–æ", "–û—Ç—Ä–∞–¥–Ω–æ–µ", "–í–ª–∞–¥—ã–∫–∏–Ω–æ", "–ü–µ—Ç—Ä–æ–≤—Å–∫–æ-–†–∞–∑—É–º–æ–≤—Å–∫–∞—è", "–¢–∏–º–∏—Ä—è–∑–µ–≤—Å–∫–∞—è", "–î–º–∏—Ç—Ä–æ–≤—Å–∫–∞—è", "–°–∞–≤—ë–ª–æ–≤—Å–∫–∞—è", "–ú–µ–Ω–¥–µ–ª–µ–µ–≤—Å–∫–∞—è", "–¶–≤–µ—Ç–Ω–æ–π –±—É–ª—å–≤–∞—Ä", "–ß–µ—Ö–æ–≤—Å–∫–∞—è", "–ë–æ—Ä–æ–≤–∏—Ü–∫–∞—è", "–ü–æ–ª—è–Ω–∫–∞", "–°–µ—Ä–ø—É—Ö–æ–≤—Å–∫–∞—è", "–¢—É–ª—å—Å–∫–∞—è", "–ù–∞–≥–∞—Ç–∏–Ω—Å–∫–∞—è", "–ù–∞–≥–æ—Ä–Ω–∞—è", "–ù–∞—Ö–∏–º–æ–≤—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç", "–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å—Å–∫–∞—è", "–ß–µ—Ä—Ç–∞–Ω–æ–≤—Å–∫–∞—è", "–Æ–∂–Ω–∞—è", "–ü—Ä–∞–∂—Å–∫–∞—è", "–£–ª–∏—Ü–∞ –ê–∫–∞–¥–µ–º–∏–∫–∞ –Ø–Ω–≥–µ–ª—è", "–ê–Ω–Ω–∏–Ω–æ", "–ë—É–ª—å–≤–∞—Ä –î–º–∏—Ç—Ä–∏—è –î–æ–Ω—Å–∫–æ–≥–æ"],
            "10": ["–§–∏–∑—Ç–µ—Ö", "–õ–∏–∞–Ω–æ–∑–æ–≤–æ", "–Ø—Ö—Ä–æ–º—Å–∫–∞—è", "–°–µ–ª–∏–≥–µ—Ä—Å–∫–∞—è", "–í–µ—Ä—Ö–Ω–∏–µ –õ–∏—Ö–æ–±–æ—Ä—ã", "–û–∫—Ä—É–∂–Ω–∞—è", "–ü–µ—Ç—Ä–æ–≤—Å–∫–æ-–†–∞–∑—É–º–æ–≤—Å–∫–∞—è", "–§–æ–Ω–≤–∏–∑–∏–Ω—Å–∫–∞—è", "–ë—É—Ç—ã—Ä—Å–∫–∞—è", "–ú–∞—Ä—å–∏–Ω–∞ –†–æ—â–∞", "–î–æ—Å—Ç–æ–µ–≤—Å–∫–∞—è", "–¢—Ä—É–±–Ω–∞—è", "–°—Ä–µ—Ç–µ–Ω—Å–∫–∏–π –±—É–ª—å–≤–∞—Ä", "–ß–∫–∞–ª–æ–≤—Å–∫–∞—è", "–†–∏–º—Å–∫–∞—è", "–ö—Ä–µ—Å—Ç—å—è–Ω—Å–∫–∞—è –ó–∞—Å—Ç–∞–≤–∞", "–î—É–±—Ä–æ–≤–∫–∞", "–ö–æ–∂—É—Ö–æ–≤—Å–∫–∞—è", "–ü–µ—á–∞—Ç–Ω–∏–∫–∏", "–í–æ–ª–∂—Å–∫–∞—è", "–õ—é–±–ª–∏–Ω–æ", "–ë—Ä–∞—Ç–∏—Å–ª–∞–≤—Å–∫–∞—è", "–ú–∞—Ä—å–∏–Ω–æ", "–ë–æ—Ä–∏—Å–æ–≤–æ", "–®–∏–ø–∏–ª–æ–≤—Å–∫–∞—è", "–ó—è–±–ª–∏–∫–æ–≤–æ"],
            "11": ["–°–∞–≤—ë–ª–æ–≤—Å–∫–∞—è", "–ü–µ—Ç—Ä–æ–≤—Å–∫–∏–π –ø–∞—Ä–∫", "–¶–°–ö–ê", "–•–æ—Ä–æ—à—ë–≤—Å–∫–∞—è", "–®–µ–ª–µ–ø–∏—Ö–∞", "–î–µ–ª–æ–≤–æ–π —Ü–µ–Ω—Ç—Ä", "–ù–∞—Ä–æ–¥–Ω–æ–µ –û–ø–æ–ª—á–µ–Ω–∏–µ", "–ú–Ω—ë–≤–Ω–∏–∫–∏", "–¢–µ—Ä–µ—Ö–æ–≤–æ", "–ö—É–Ω—Ü–µ–≤—Å–∫–∞—è", "–î–∞–≤—ã–¥–∫–æ–≤–æ", "–ê–º–∏–Ω—å–µ–≤—Å–∫–∞—è", "–ú–∏—á—É—Ä–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç", "–ü—Ä–æ—Å–ø–µ–∫—Ç –í–µ—Ä–Ω–∞–¥—Å–∫–æ–≥–æ", "–ù–æ–≤–∞—Ç–æ—Ä—Å–∫–∞—è", "–í–æ—Ä–æ–Ω—Ü–æ–≤—Å–∫–∞—è", "–ó—é–∑–∏–Ω–æ", "–ö–∞—Ö–æ–≤—Å–∫–∞—è", "–í–∞—Ä—à–∞–≤—Å–∫–∞—è", "–ö–∞—à–∏—Ä—Å–∫–∞—è", "–ö–ª–µ–Ω–æ–≤—ã–π –±—É–ª—å–≤–∞—Ä", "–ù–∞–≥–∞—Ç–∏–Ω—Å–∫–∏–π –ó–∞—Ç–æ–Ω", "–ü–µ—á–∞—Ç–Ω–∏–∫–∏", "–¢–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏", "–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è", "–ê–≤–∏–∞–º–æ—Ç–æ—Ä–Ω–∞—è", "–õ–µ—Ñ–æ—Ä—Ç–æ–≤–æ", "–≠–ª–µ–∫—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫–∞—è", "–°–æ–∫–æ–ª—å–Ω–∏–∫–∏", "–†–∏–∂—Å–∫–∞—è", "–ú–∞—Ä—å–∏–Ω–∞ –†–æ—â–∞"],
            "12": ["–ë–∏—Ç—Ü–µ–≤—Å–∫–∏–π –ø–∞—Ä–∫", "–õ–µ—Å–æ–ø–∞—Ä–∫–æ–≤–∞—è", "–£–ª–∏—Ü–∞ –°—Ç–∞—Ä–æ–∫–∞—á–∞–ª–æ–≤—Å–∫–∞—è", "–£–ª–∏—Ü–∞ –°–∫–æ–±–µ–ª–µ–≤—Å–∫–∞—è", "–ë—É–ª—å–≤–∞—Ä –ê–¥–º–∏—Ä–∞–ª–∞ –£—à–∞–∫–æ–≤–∞", "–£–ª–∏—Ü–∞ –ì–æ—Ä—á–∞–∫–æ–≤–∞", "–ë—É–Ω–∏–Ω—Å–∫–∞—è –∞–ª–ª–µ—è"],
            "13": ["–¢–∏–º–∏—Ä—è–∑–µ–≤—Å–∫–∞—è", "–£–ª–∏—Ü–∞ –ú–∏–ª–∞—à–µ–Ω–∫–æ–≤–∞", "–¢–µ–ª–µ—Ü–µ–Ω—Ç—Ä", "–£–ª–∏—Ü–∞ –ê–∫–∞–¥–µ–º–∏–∫–∞ –ö–æ—Ä–æ–ª—ë–≤–∞", "–í—ã—Å—Ç–∞–≤–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä", "–£–ª–∏—Ü–∞ –°–µ—Ä–≥–µ—è –≠–π–∑–µ–Ω—à—Ç–µ–π–Ω–∞"],
            "14": ["–û–∫—Ä—É–∂–Ω–∞—è", "–í–ª–∞–¥—ã–∫–∏–Ω–æ", "–ë–æ—Ç–∞–Ω–∏—á–µ—Å–∫–∏–π —Å–∞–¥", "–†–æ—Å—Ç–æ–∫–∏–Ω–æ", "–ë–µ–ª–æ–∫–∞–º–µ–Ω–Ω–∞—è", "–ë—É–ª—å–≤–∞—Ä –†–æ–∫–æ—Å—Å–æ–≤—Å–∫–æ–≥–æ", "–õ–æ–∫–æ–º–æ—Ç–∏–≤", "–ò–∑–º–∞–π–ª–æ–≤–æ", "–°–æ–∫–æ–ª–∏–Ω–∞—è –ì–æ—Ä–∞", "–®–æ—Å—Å–µ –≠–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–≤", "–ê–Ω–¥—Ä–æ–Ω–æ–≤–∫–∞", "–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è", "–ù–æ–≤–æ—Ö–æ—Ö–ª–æ–≤—Å–∫–∞—è", "–£–≥—Ä–µ—à—Å–∫–∞—è", "–î—É–±—Ä–æ–≤–∫–∞", "–ê–≤—Ç–æ–∑–∞–≤–æ–¥—Å–∫–∞—è", "–ó–ò–õ", "–í–µ—Ä—Ö–Ω–∏–µ –ö–æ—Ç–ª—ã", "–ö—Ä—ã–º—Å–∫–∞—è", "–ü–ª–æ—â–∞–¥—å –ì–∞–≥–∞—Ä–∏–Ω–∞", "–õ—É–∂–Ω–∏–∫–∏", "–ö—É—Ç—É–∑–æ–≤—Å–∫–∞—è", "–î–µ–ª–æ–≤–æ–π —Ü–µ–Ω—Ç—Ä", "–®–µ–ª–µ–ø–∏—Ö–∞", "–•–æ—Ä–æ—à—ë–≤–æ", "–ó–æ—Ä–≥–µ", "–ü–∞–Ω—Ñ–∏–ª–æ–≤—Å–∫–∞—è", "–°—Ç—Ä–µ—à–Ω–µ–≤–æ", "–ë–∞–ª—Ç–∏–π—Å–∫–∞—è", "–ö–æ–ø—Ç–µ–≤–æ", "–õ–∏—Ö–æ–±–æ—Ä—ã"],
            "15": ["–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è", "–°—Ç–∞—Ö–∞–Ω–æ–≤—Å–∫–∞—è", "–û–∫—Å–∫–∞—è", "–Æ–≥–æ-–í–æ—Å—Ç–æ—á–Ω–∞—è", "–ö–æ—Å–∏–Ω–æ", "–£–ª–∏—Ü–∞ –î–º–∏—Ç—Ä–∏–µ–≤—Å–∫–æ–≥–æ", "–õ—É—Ö–º–∞–Ω–æ–≤—Å–∫–∞—è", "–ù–µ–∫—Ä–∞—Å–æ–≤–∫–∞"],
            "16": ["–ù–æ–≤–∞—Ç–æ—Ä—Å–∫–∞—è", "–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç –î—Ä—É–∂–±—ã –ù–∞—Ä–æ–¥–æ–≤", "–ì–µ–Ω–µ—Ä–∞–ª–∞ –¢—é–ª–µ–Ω–µ–≤–∞", "–¢—é—Ç—á–µ–≤—Å–∫–∞—è"],
            "D1": ["–õ–æ–±–Ω—è", "–®–µ—Ä–µ–º–µ—Ç—å–µ–≤—Å–∫–∞—è", "–•–ª–µ–±–Ω–∏–∫–æ–≤–æ", "–í–æ–¥–Ω–∏–∫–∏", "–î–æ–ª–≥–æ–ø—Ä—É–¥–Ω–∞—è", "–ù–æ–≤–æ–¥–∞—á–Ω–∞—è", "–ú–∞—Ä–∫", "–õ–∏–∞–Ω–æ–∑–æ–≤–æ", "–ë–µ—Å–∫—É–¥–Ω–∏–∫–æ–≤–æ", "–î–µ–≥—É–Ω–∏–Ω–æ", "–û–∫—Ä—É–∂–Ω–∞—è", "–ü–µ—Ç—Ä–æ–≤—Å–∫–æ-–†–∞–∑—É–º–æ–≤—Å–∫–∞—è", "–¢–∏–º–∏—Ä—è–∑–µ–≤—Å–∫–∞—è", "–°–∞–≤—ë–ª–æ–≤—Å–∫–∞—è", "–ë–µ–ª–æ—Ä—É—Å—Å–∫–∞—è", "–ë–µ–≥–æ–≤–∞—è", "–ú–æ—Å–∫–≤–∞-–°–∏—Ç–∏", "–§–∏–ª–∏", "–°–ª–∞–≤—è–Ω—Å–∫–∏–π –±—É–ª—å–≤–∞—Ä", "–ö—É–Ω—Ü–µ–≤—Å–∫–∞—è", "–†–∞–±–æ—á–∏–π –ü–æ—Å—ë–ª–æ–∫", "–°–µ—Ç—É–Ω—å", "–ù–µ–º—á–∏–Ω–æ–≤–∫–∞", "–°–∫–æ–ª–∫–æ–≤–æ", "–ë–∞–∫–æ–≤–∫–∞", "–û–¥–∏–Ω—Ü–æ–≤–æ"],
            "D2": ["–ù–∞—Ö–∞–±–∏–Ω–æ", "–ê–Ω–∏–∫–µ–µ–≤–∫–∞", "–û–ø–∞–ª–∏—Ö–∞", "–ö—Ä–∞—Å–Ω–æ–≥–æ—Ä—Å–∫–∞—è", "–ü–∞–≤—à–∏–Ω–æ", "–ü–µ–Ω—è–≥–∏–Ω–æ", "–í–æ–ª–æ–∫–æ–ª–∞–º—Å–∫–∞—è", "–¢—Ä–∏–∫–æ—Ç–∞–∂–Ω–∞—è", "–¢—É—à–∏–Ω—Å–∫–∞—è", "–©—É–∫–∏–Ω—Å–∫–∞—è", "–°—Ç—Ä–µ—à–Ω–µ–≤–æ", "–ö—Ä–∞—Å–Ω—ã–π –ë–∞–ª—Ç–∏–µ—Ü", "–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–∞—è", "–î–º–∏—Ç—Ä–æ–≤—Å–∫–∞—è", "–ú–∞—Ä—å–∏–Ω–∞ –†–æ—â–∞", "–†–∏–∂—Å–∫–∞—è", "–ü–ª–æ—â–∞–¥—å –¢—Ä—ë—Ö –í–æ–∫–∑–∞–ª–æ–≤", "–ö—É—Ä—Å–∫–∞—è", "–ú–æ—Å–∫–≤–∞-–¢–æ–≤–∞—Ä–Ω–∞—è", "–ö–∞–ª–∏—Ç–Ω–∏–∫–∏", "–ù–æ–≤–æ—Ö–æ—Ö–ª–æ–≤—Å–∫–∞—è", "–ü–µ—á–∞—Ç–Ω–∏–∫–∏", "–õ—é–±–ª–∏–Ω–æ", "–î–µ–ø–æ", "–ü–µ—Ä–µ—Ä–≤–∞", "–ö—É—Ä—å—è–Ω–æ–≤–æ", "–ú–æ—Å–∫–≤–æ—Ä–µ—á—å–µ", "–¶–∞—Ä–∏—Ü—ã–Ω–æ", "–ü–æ–∫—Ä–æ–≤—Å–∫–æ–µ", "–ö—Ä–∞—Å–Ω—ã–π –°—Ç—Ä–æ–∏—Ç–µ–ª—å", "–ë–∏—Ç—Ü–∞", "–ë—É—Ç–æ–≤–æ", "–©–µ—Ä–±–∏–Ω–∫–∞", "–û—Å—Ç–∞—Ñ—å–µ–≤–æ", "–°–∏–ª–∏–∫–∞—Ç–Ω–∞—è", "–ü–æ–¥–æ–ª—å—Å–∫"],
            "D3": ["–ó–µ–ª–µ–Ω–æ–≥—Ä–∞–¥-–ö—Ä—é–∫–æ–≤–æ", "–§–∏—Ä—Å–∞–Ω–æ–≤—Å–∫–∞—è", "–°—Ö–æ–¥–Ω—è", "–ü–æ–¥—Ä–µ–∑–∫–æ–≤–æ", "–ù–æ–≤–æ–ø–æ–¥—Ä–µ–∑–∫–æ–≤–æ", "–ú–æ–ª–∂–∞–Ω–∏–Ω–æ–≤–æ", "–•–∏–º–∫–∏", "–õ–µ–≤–æ–±–µ—Ä–µ–∂–Ω–∞—è", "–•–æ–≤—Ä–∏–Ω–æ", "–ì—Ä–∞—á—ë–≤—Å–∫–∞—è", "–ú–æ—Å—Å–µ–ª—å–º–∞—à", "–õ–∏—Ö–æ–±–æ—Ä—ã", "–ü–µ—Ç—Ä–æ–≤—Å–∫–æ-–†–∞–∑—É–º–æ–≤—Å–∫–∞—è", "–û—Å—Ç–∞–Ω–∫–∏–Ω–æ", "–ú–∏—Ç—å–∫–æ–≤–æ", "–≠–ª–µ–∫—Ç—Ä–æ–∑–∞–≤–æ–¥—Å–∫–∞—è", "–°–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è", "–ê–≤–∏–∞–º–æ—Ç–æ—Ä–Ω–∞—è", "–ê–Ω–¥—Ä–æ–Ω–æ–≤–∫–∞", "–ü–µ—Ä–æ–≤–æ", "–ü–ª—é—â–µ–≤–æ", "–í–µ—à–Ω—è–∫–∏", "–í—ã—Ö–∏–Ω–æ", "–ö–æ—Å–∏–Ω–æ", "–£—Ö—Ç–æ–º—Å–∫–∞—è", "–õ—é–±–µ—Ä—Ü—ã", "–ü–∞–Ω–∫–∏", "–¢–æ–º–∏–ª–∏–Ω–æ", "–ö—Ä–∞—Å–∫–æ–≤–æ", "–ú–∞–ª–∞—Ö–æ–≤–∫–∞", "–£–¥–µ–ª—å–Ω–∞—è", "–ë—ã–∫–æ–≤–æ", "–ò–ª—å–∏–Ω—Å–∫–∞—è", "–û—Ç–¥—ã—Ö", "–ö—Ä–∞—Ç–æ–≤–æ", "–ï—Å–µ–Ω–∏–Ω—Å–∫–∞—è", "–§–∞–±—Ä–∏—á–Ω–∞—è", "–†–∞–º–µ–Ω—Å–∫–æ–µ", "–ò–ø–ø–æ–¥—Ä–æ–º"],
            "D4": ["–ê–ø—Ä–µ–ª–µ–≤–∫–∞", "–ü–æ–±–µ–¥–∞", "–ö—Ä—ë–∫—à–∏–Ω–æ", "–°–∞–Ω–∏–Ω–æ", "–ö–æ–∫–æ—à–∫–∏–Ω–æ", "–¢–æ–ª—Å—Ç–æ–ø–∞–ª—å—Ü–µ–≤–æ", "–õ–µ—Å–Ω–æ–π –ì–æ—Ä–æ–¥–æ–∫", "–í–Ω—É–∫–æ–≤–æ", "–ú–∏—á—É—Ä–∏–Ω–µ—Ü", "–ü–µ—Ä–µ–¥–µ–ª–∫–∏–Ω–æ", "–°–æ–ª–Ω–µ—á–Ω–∞—è", "–ú–µ—â—ë—Ä—Å–∫–∞—è", "–û—á–∞–∫–æ–≤–æ", "–ê–º–∏–Ω—å–µ–≤—Å–∫–∞—è", "–ú–∞—Ç–≤–µ–µ–≤—Å–∫–æ–µ", "–ú–∏–Ω—Å–∫–∞—è", "–ü–æ–∫–ª–æ–Ω–Ω–∞—è", "–ú–æ—Å–∫–≤–∞-–°–∏—Ç–∏", "–ö—É—Ç—É–∑–æ–≤—Å–∫–∞—è", "–ë–µ–≥–æ–≤–∞—è", "–ë–µ–ª–æ—Ä—É—Å—Å–∫–∞—è", "–°–∞–≤—ë–ª–æ–≤—Å–∫–∞—è", "–ú–∞—Ä—å–∏–Ω–∞ –†–æ—â–∞", "–†–∏–∂—Å–∫–∞—è", "–ü–ª–æ—â–∞–¥—å –¢—Ä—ë—Ö –í–æ–∫–∑–∞–ª–æ–≤", "–ö—É—Ä—Å–∫–∞—è", "–°–µ—Ä–ø –∏ –ú–æ–ª–æ—Ç", "–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è", "–ß—É—Ö–ª–∏–Ω–∫–∞", "–ö—É—Å–∫–æ–≤–æ", "–ù–æ–≤–æ–≥–∏—Ä–µ–µ–≤–æ", "–†–µ—É—Ç–æ–≤", "–ù–∏–∫–æ–ª—å—Å–∫–æ–µ", "–°–∞–ª—Ç—ã–∫–æ–≤—Å–∫–∞—è", "–ö—É—á–∏–Ω–æ", "–û–ª—å–≥–∏–Ω–æ", "–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω–∞—è"]
        };

        const stations = [];
        for (const [line, list] of Object.entries(data)) {
            list.forEach(name => {
                stations.push({
                    name: `${name} (${line.startsWith('D') ? '' : '–õ–∏–Ω–∏—è '}${line})`,
                    icon: `img/${line}.svg`,
                    lineId: line
                });
            });
        }

        const searchInput = document.getElementById('station-search');
        const dropdown = document.getElementById('custom-stations-list');
        let selected = "";

        function render(val) {
            dropdown.innerHTML = "";
            const filtered = stations.filter(s => s.name.toLowerCase().includes(val.toLowerCase())).slice(0, 15);
            if (filtered.length === 0 || val === "") { dropdown.classList.remove('active'); return; }

            filtered.forEach(s => {
                const div = document.createElement('div');
                div.className = 'dropdown-item';
                div.innerHTML = `<div class="icon-box"><img src="${s.icon}" onerror="this.src='img/metro.svg'"></div><div class="station-name">${s.name}</div>`;
                div.onclick = () => {
                    searchInput.value = s.name;
                    selected = s.name;
                    dropdown.classList.remove('active');
                    
                    const newColor = lineColors[s.lineId] || '#005AAB';
                    document.documentElement.style.setProperty('--primary-color', newColor);
                    tg.HapticFeedback.impactOccurred('light'); 
                };
                dropdown.appendChild(div);
            });
            dropdown.classList.add('active');
        }

        searchInput.oninput = (e) => render(e.target.value);
        document.onclick = (e) => { if (e.target !== searchInput) dropdown.classList.remove('active'); };

        document.getElementById('submit-btn').onclick = function() {
            const desc = document.getElementById('description').value.trim();
            if (!desc || !selected) { 
                tg.HapticFeedback.notificationOccurred('error');
                tg.showAlert("–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞–Ω—Ü–∏—é –∏ –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É"); 
                return; 
            }

            const btn = this;
            btn.classList.add('train-depart');
            
            // --- –†–ê–°–°–õ–ê–ë–õ–ï–ù–ù–´–ô –≠–§–§–ï–ö–¢ –†–ê–ó–ì–û–ù–ê –ü–û–ï–ó–î–ê ---
            // –°—Ç—É–∫ –∫–æ–ª–µ—Å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ –∏ —Ç–æ–ª—å–∫–æ –∫ –∫–æ–Ω—Ü—É –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –≤–∏–±—Ä–∞—Ü–∏—é
            const accelerationDelays = [600, 500, 400, 350, 300, 250, 200, 150, 150, 120, 100, 80, 80, 50, 50, 50, 50, 50]; 
            let step = 0;
            
            function accelerateTrain() {
                if (step < accelerationDelays.length) {
                    tg.HapticFeedback.impactOccurred('light'); 
                    setTimeout(accelerateTrain, accelerationDelays[step]);
                    step++;
                }
            }
            
            accelerateTrain();

            // –û–∫–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ 3.8 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                tg.HapticFeedback.notificationOccurred('success');
                tg.sendData(JSON.stringify({ station: selected, description: desc }));
                tg.close();
            }, 3800); 
        };
    </script>
</body>
</html>
